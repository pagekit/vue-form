/**
 * vue-form v0.1.0
 * Released under the MIT License.
 */

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueForm=e():t.VueForm=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=function(t){var e=i(1)(t),n=i(2)(e),r=i(5)(e);t.field=n,t.component("fields",n),t.validator=r,t.filter("valid",r.filter),t.directive("validator",r.directive),t.directive("validate",i(7)(e))},window.Vue&&Vue.use(t.exports)},function(t,e){t.exports=function(t){var e=t.util.extend({},t.util),i=t.config;return e.warn=function(t){!window.console||i.silent&&!i.debug||console.warn("[VueForm warn]: "+t)},e.each=function(t,i,n){var r,a;if("number"==typeof t.length)for(r=0;r<t.length;r++)i.call(n||t[r],t[r],r);else if(e.isObject(t))for(a in t)t.hasOwnProperty(a)&&i.call(n||t[a],t[a],a);return t},e.pull=function(t,e){t.splice(t.indexOf(e),1)},e.attr=function(t,e){return t?t.getAttribute(e):null},e.trigger=function(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!1),t.dispatchEvent(i)},e.isString=function(t){return"string"==typeof t},e}},function(t,e,i){t.exports=function(t){return t.field={props:{config:{"default":""},model:{"default":""},template:{type:String,"default":"default"}},created:function(){return this.fields&&this.values?void(this.$options.template||(this.$options.template=this.$options.templates[this.template])):(t.warn("Invalid config or model provided"),void(this.$options.template=""))},computed:{fields:function(){var e=this;if(t.isObject(this.config))return this.filterFields(this.config);do{if(t.isObject(e.$options[this.config]))return this.filterFields(e.$options[this.config]);e=e.$parent}while(e)},values:function(){var e=this;if(t.isObject(this.model))return this.model;do{if(t.isObject(e.$get(this.model)))return e.$get(this.model);e=e.$parent}while(e)}},methods:{filterFields:function(e){var i=t.isArray(e),n=[];return t.each(e,function(e,r){t.isString(e.name)||i||(e.name=r),t.isString(e.name)?n.push(e):t.warn("Field name missing "+JSON.stringify(e))}),n}},components:{field:i(3)(t)},templates:{"default":i(4)},types:{text:'<input type="text" v-attr="attrs" v-model="value">',textarea:'<textarea v-attr="attrs" v-model="value"></textarea>',radio:'<input type="radio" v-attr="attrs" v-model="value">',checkbox:'<input type="checkbox" v-attr="attrs" v-model="value">',select:'<select v-attr="attrs" v-model="value" options="options | options"></select>'}}}},function(t,e){t.exports=function(t){return{props:["config","values"],template:'<partial name="{{ type }}"></partial>',data:function(){return t.extend({key:"",name:"",type:"text",label:"",attrs:{},options:[]},this.config)},created:function(){this.$set("key",'["'+this.name.replace(".",'"]["')+'"]'),this.$options.partials=t.field.types},computed:{value:{get:function(){return this.$get("values"+this.key)},set:function(t){this.$set("values"+this.key,t)}}},methods:{filterOptions:function(e){var i=[];return e?(t.each(e,function(e,n){t.isObject(e)?i.push({label:n,options:this.filterOptions(e)}):i.push({text:n,value:e})},this),i):(t.warn("Invalid options provided for "+this.name),i)}},filters:{options:function(t){return this.filterOptions(t)}}}}},function(t,e){t.exports='<div v-repeat="field in fields"><label v-if="field.type != \'checkbox\'">{{ field.label }}</label><field config="{{ field }}" values="{{@ values }}"></field></div>'},function(t,e,i){t.exports=function(t){return t.validator={dirs:[],types:i(6),add:function(t){this.dirs.push(t)},remove:function(e){t.pull(this.dirs,e)},instance:function(t){do{if(t._validator)return t._validator;t=t.parentElement}while(t)},validate:function(e,i){var n=this.instance(e),r={valid:!0};if(n)return this.dirs.forEach(function(t){var e=t.validate(),a=t.el,o=t.name;this.instance(a)===n&&(!a._touched&&i&&(a._touched=!0),a._touched||e||(e=!0,r.valid=!1),r[o]||(r[o]={valid:!0,invalid:!1,dirty:a._dirty,touched:a._touched}),r[o][t.type]=!e,i&&r.valid&&!e&&a.focus(),r[o].valid&&!e&&(r[o].valid=!1,r[o].invalid=!0,r.valid=!1))},this),r.invalid=!r.valid,n.results(r),i&&r.invalid&&t.trigger(n.el,"invalid"),r.valid},filter:function(e){return function(i){i.preventDefault(),t.validator.validate(i.target,!0)&&e(i)}.bind(this)},directive:{bind:function(){var e=this,i=this.arg||this.expression;this.name=t.camelize(i),this.el._validator=this,this.vm.$add(this.name),this.vm.$on("hook:compiled",function(){t.validator.validate(e.el)})},unbind:function(){this.vm.$delete(this.name)},results:function(e){this.vm.$set(this.name,t.extend({validate:this.validate.bind(this)},e))},validate:function(){return t.validator.validate(this.el,!0)}}}}},function(t,e){e.required=function(t,e){return"boolean"!=typeof e&&(e=!0),"boolean"==typeof t?!e||t:!e||!(null===t||0===t.length)},e.numeric=function(t){return/^[-+]?[0-9]+$/.test(t)},e.integer=function(t){return/^(?:[-+]?(?:0|[1-9][0-9]*))$/.test(t)},e["float"]=function(t){return/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/.test(t)},e.alpha=function(t){return/^([A-Z]+)?$/i.test(t)},e.alphaNum=function(t){return/^([0-9A-Z]+)?$/i.test(t)},e.email=function(t){return/^([a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*)?$/i.test(t||"a@a.aa")},e.url=function(t){return/^((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)?$/.test(t)},e.minLength=function(t,e){return t&&t.length&&t.length>=+e},e.maxLength=function(t,e){return t&&t.length&&t.length<=+e},e.length=function(t){return t&&t.length==+arg},e.min=function(t,e){return t>=+e},e.max=function(t,e){return+e>=t},e.pattern=function(t,e){var i=e.match(new RegExp("^/(.*?)/([gimy]*)$")),n=new RegExp(i[1],i[2]);return n.test(t)}},function(t,e){t.exports=function(t){return{bind:function(){var e=t.attr(this.el,"name");e&&(this.name=t.camelize(e),this.type=this.arg||this.expression,this.value=this.el.value,this.el._dirty=!1,this.el._touched=!1,t.on(this.el,"blur",this.listener.bind(this)),t.on(this.el,"input",this.listener.bind(this)),t.validator.add(this))},unbind:function(){t.off(this.el,"blur",this.listener),t.off(this.el,"input",this.listener),t.validator.remove(this)},update:function(t){this.args=t},listener:function(e){(!e.relatedTarget||"A"!==e.relatedTarget.tagName&&"BUTTON"!==e.relatedTarget.tagName)&&("blur"==e.type&&(this.el._touched=!0),this.el.value!=this.value&&(this.el._dirty=!0),t.validator.validate(this.el))},validate:function(){var t=this.validator();return t?t.call(this.vm,this.el.value,this.args):void 0},validator:function(){var e,i=this.vm;do{if(e=i.$options.validators||{},e[this.type])return e[this.type];i=i.$parent}while(i);return t.validator.types[this.type]}}}}])});